import{r as y,a as u,o as F,b as v,c as f,d as r,w as V,v as I,F as L,e as M,u as C,t as _,f as N}from"./vendor.a08634e2.js";const S=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function h(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(i){if(i.ep)return;i.ep=!0;const s=h(i);fetch(i.href,s)}};S();const U={class:"h-100 d-flex"},z=r("div",{class:"h-100 flex-shrink-0 left-div"},null,-1),A={class:"h-100 flex-grow-1 right-div"},B={class:"h-100 d-flex flex-column"},R={class:"w-100 flex-grow-1 main-div"},T={class:"position-relative"},P={class:"w-100 flex-shrink-0 bottom-div"},q={class:"d-flex align-items-center"},K={class:"my-1 flex-grow-1"},G=["value"],J=["value"],Q=r("div",{class:"my-1 flex-shrink-0"},[r("button",{class:"mx-1 px-5 btn btn-primary"},"\u62CD\u7167")],-1),X={setup(E){const l=y([]),h=u(-1),c=u(null),i=u(null),s=y([]),d=u(-1),x=y({}),H=u(1);async function W(){await k(),l.find(n=>!!n.name)||((await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),await k()),l.length>0&&(h.value=0,g())}async function k(){l.length=0;const n=await navigator.mediaDevices.enumerateDevices();for(let t=0;t<n.length;t++){const e=n[t];e.kind=="videoinput"&&l.push({name:e.label,path:e.deviceId})}}async function g(){const n=l[h.value],t=s[d.value];$();const e=c.value,a=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:n.path},width:t?{exact:t.width}:void 0,height:t?{exact:t.height}:void 0}});e.srcObject=a,await e.play();const b=a.getVideoTracks();let m=0,p=0,w=0;try{const o=b[0].getCapabilities();m=o.width.max,p=o.height.max}catch(o){console.error(o)}try{w=b[0].getSettings().frameRate}catch(o){console.error(o)}x.width=m,x.height=p,H.value=w>0?w:15,s.length=0,[{width:2592,height:1944},{width:2048,height:1536},{width:1920,height:1080},{width:1600,height:1200},{width:1280,height:720},{width:1024,height:768},{width:640,height:480},{width:320,height:240}].forEach(o=>{o.width<=m&&o.height<=p&&s.push({width:o.width,height:o.height})});const D=e.videoWidth,O=e.videoHeight;d.value=s.findIndex(o=>o.width==D&&o.height==O||o.width==O&&o.height==D)}function $(){const n=c.value,t=n.srcObject;t&&t.getTracks().forEach(a=>{a.stop()}),n.srcObject=null}function j(){const n=c.value;alert(`videoWidth=${n.videoWidth}, videoHeight=${n.videoHeight}`)}return F(()=>{W()}),(n,t)=>(v(),f("div",U,[z,r("div",A,[r("div",B,[r("div",R,[r("div",T,[r("video",{ref:(e,a)=>{a.domVideo=e,c.value=e},class:"position-absolute",playsinline:"",onResize:t[0]||(t[0]=e=>j())},null,544),r("canvas",{ref:(e,a)=>{a.domCanvas=e,i.value=e},class:"position-absolute"},null,512)])]),r("div",P,[r("div",q,[r("div",K,[V(r("select",{class:"mx-1","onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),onChange:t[2]||(t[2]=e=>g())},[(v(!0),f(L,null,M(C(l),(e,a)=>(v(),f("option",{key:a,value:a},_(e.name),9,G))),128))],544),[[I,h.value]]),V(r("select",{class:"mx-1","onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),onChange:t[4]||(t[4]=e=>g())},[(v(!0),f(L,null,M(C(s),(e,a)=>(v(),f("option",{key:a,value:a},_(e.width)+" x "+_(e.height),9,J))),128))],544),[[I,d.value]])]),Q])])])])]))}},Y=N(X);Y.mount("#app");
